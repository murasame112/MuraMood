<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
		<link rel="stylesheet" href="../styles/index.css">
    <title>MuraMood</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
</head>
<body>
	<div id="summary-container"></div>
</body>
</html>
<script>
  function extractHour(isoString) {
    const date = new Date(isoString);
    return date.getHours().toString().padStart(2, '0') + ':00';
  }

  window.electronAPI.getMoodSummary().then(summary => {
    const container = document.getElementById('summary-container');
    if (!container) return;

    for (const [date, entries] of Object.entries(summary)) {
      const section = document.createElement('section');

      const heading = document.createElement('h2');
      heading.textContent = `ðŸ“… ${date}`;
      section.appendChild(heading);

      const table = document.createElement('table');
      table.style.borderCollapse = 'collapse';
      table.style.marginBottom = '2em';

      const thead = document.createElement('thead');
      thead.innerHTML = `
        <tr>
          <th style="border: 1px solid var(--misc); padding: 6px;">Godzina</th>
          <th style="border: 1px solid var(--misc); padding: 6px;">NastrÃ³j</th>
          <th style="border: 1px solid var(--misc); padding: 6px;">AktywnoÅ›Ä‡</th>
        </tr>
      `;
      table.appendChild(thead);

      const tbody = document.createElement('tbody');
      entries.forEach(entry => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td style="border: 1px solid var(--misc); padding: 6px;">${extractHour(entry.timestamp)}</td>
          <td style="border: 1px solid var(--misc); padding: 6px;">${entry.mood}</td>
          <td style="border: 1px solid var(--misc); padding: 6px;">${entry.activity}</td>
        `;
        tbody.appendChild(tr);
      });

      table.appendChild(tbody);
      section.appendChild(table);
      container.appendChild(section);
    }
  });
</script>
